# 答错体验测试指南

本文档专门测试答错时的用户体验优化功能。

---

## 🎯 测试目标

验证答错时的三个核心优化：
1. ✅ 温和的错误提示（不用红色大叉）
2. ✅ 题目保持不变
3. ✅ 保留用户输入，允许继续修改

---

## 📝 测试准备

1. 启动应用：
```bash
./start.sh
```

2. 访问：http://localhost:5173

---

## 🧪 测试用例

### 测试 1: 起点错误 - 温和提示

**步骤**：
1. 选择 1号线
2. 设置起点：罗湖，终点：世界之窗
3. 输入路径：国贸 → 老街 → 大剧院 → 科学馆 → 华强路 → 岗厦 → 会展中心 → 购物公园 → 香蜜湖 → 车公庙 → 侨城北 → 深康 → 白石洲 → 高新园 → 深大 → 桃园 → 大新 → 鲤鱼门 → 前海湾 → 新安 → 宝安中心 → 宝体 → 坪洲 → 碧海湾 → 侨城东 → 世界之窗
4. 点击"提交答案"

**预期结果**：
- ✅ 在路径输入区域顶部显示橙色提示框
- ✅ 图标是灯泡（💡），不是红叉（❌）
- ✅ 标题："路径有误"
- ✅ 错误原因："起点错误：你的路径起点是 国贸，但应该是 罗湖"
- ✅ 鼓励文案："💪 请在下方继续修改你的路径，然后重新提交"
- ✅ 提示框右上角有关闭按钮（✕）
- ✅ 题目（起点、终点）保持不变
- ✅ 用户输入的路径保持不变
- ✅ 提交按钮文案变为"重新提交"
- ✅ 显示"👁️ 查看正确答案"按钮

---

### 测试 2: 在原路径基础上修改

**步骤**：
1. 接上一个测试，保持错误提示显示
2. 点击第一个站点"国贸"旁边的 ✕ 删除它
3. 在输入框输入"罗湖"，点击"添加"
4. 观察路径变化
5. 点击"重新提交"

**预期结果**：
- ✅ 可以删除站点
- ✅ 可以添加站点
- ✅ 路径顺序正确更新
- ✅ 重新提交后，如果路径正确，显示成功提示
- ✅ 如果路径仍有问题，继续显示温和提示

---

### 测试 3: 路径不是最短 - 黄色提示

**步骤**：
1. 选择 1号线、2号线
2. 设置起点：罗湖，终点：世界之窗
3. 输入一条绕路的路径：
   - 罗湖 → 国贸 → 老街 → 大剧院 → 科学馆 → 华强路 → 岗厦 → 会展中心 → 购物公园 → 香蜜湖 → 车公庙 → 竹子林 → 侨城北 → 深康 → 白石洲 → 高新园 → 深大 → 桃园 → 大新 → 鲤鱼门 → 前海湾 → 新安 → 宝安中心 → 宝体 → 坪洲 → 碧海湾 → 侨城东 → 世界之窗
4. 点击"提交答案"

**预期结果**：
- ✅ 显示黄色提示框（bg-yellow-50）
- ✅ 标题："路径可以优化"
- ✅ 错误原因包含成本对比
- ✅ 建议："请尝试减少换乘或站点数量"
- ✅ 路径保持不变，可以继续修改

---

### 测试 4: 站点不相邻

**步骤**：
1. 选择 1号线
2. 设置起点：罗湖，终点：世界之窗
3. 输入路径：罗湖 → 世界之窗（跳过所有中间站）
4. 点击"提交答案"

**预期结果**：
- ✅ 显示橙色提示框
- ✅ 标题："路径有误"
- ✅ 错误原因："站点不相邻：罗湖 → 世界之窗 之间没有直接连接"
- ✅ 可以继续修改

---

### 测试 5: 关闭错误提示

**步骤**：
1. 在任何错误提示显示时
2. 点击提示框右上角的 ✕ 按钮

**预期结果**：
- ✅ 错误提示框消失
- ✅ 路径输入区域正常显示
- ✅ 用户路径保持不变
- ✅ 可以继续修改和提交

---

### 测试 6: 查看正确答案

**步骤**：
1. 故意输入错误路径并提交
2. 点击"👁️ 查看正确答案"按钮
3. 在弹出的确认对话框中点击"确定"

**预期结果**：
- ✅ 弹出确认对话框："确定要查看正确答案吗？查看后将无法继续修改。"
- ✅ 确认后，在路径输入区域下方显示蓝色答案框
- ✅ 显示所有最短路径（带换乘标注）
- ✅ 换乘站用橙色高亮
- ✅ 页面切换到结果状态
- ✅ 显示"恭喜答对！"标题（即使实际答错了）

---

### 测试 7: 多次尝试修改

**步骤**：
1. 选择线路并设置起终点
2. 输入一个错误路径，提交
3. 修改路径（添加/删除站点）
4. 再次提交
5. 重复 3-4 步骤多次

**预期结果**：
- ✅ 每次提交都会验证路径
- ✅ 错误提示实时更新
- ✅ 题目始终保持不变
- ✅ 可以无限次尝试
- ✅ 直到答对或选择查看答案

---

### 测试 8: 答对后的状态

**步骤**：
1. 经过多次修改后，输入正确的最短路径
2. 点击"重新提交"

**预期结果**：
- ✅ 页面切换到结果状态
- ✅ 显示绿色成功提示
- ✅ 标题："🎉 恭喜答对！"
- ✅ 显示所有最短路径
- ✅ 显示"再来一局"和"返回首页"按钮
- ✅ 不再显示路径输入区域

---

## 🎨 视觉效果检查

### 颜色方案
- ✅ **橙色提示**（路径不合法）：
  - 背景：`bg-orange-50`
  - 边框：`border-orange-300`
  - 文字：`text-orange-600` / `text-orange-700`

- ✅ **黄色提示**（路径可优化）：
  - 背景：`bg-yellow-50`
  - 边框：`border-yellow-300`
  - 文字：`text-yellow-600` / `text-yellow-700`

- ✅ **蓝色答案框**：
  - 背景：`bg-blue-50`
  - 边框：`border-blue-300`
  - 文字：`text-blue-600` / `text-blue-700`

### 图标和文案
- ✅ 错误提示图标：💡（灯泡）
- ✅ 成功图标：🎉
- ✅ 查看答案图标：👁️
- ✅ 鼓励文案：💪
- ✅ 提交按钮：🚀

---

## 🔄 完整流程测试

**场景**：用户从错误到正确的完整过程

1. 选择 1号线、2号线
2. 设置起点：罗湖，终点：世界之窗
3. 第一次尝试：输入错误起点
   - 看到橙色提示
   - 修改起点
4. 第二次尝试：输入绕路路径
   - 看到黄色提示
   - 删除多余站点
5. 第三次尝试：输入正确路径
   - 看到绿色成功提示
   - 查看所有最短路径

**预期结果**：
- ✅ 整个过程流畅
- ✅ 题目始终不变
- ✅ 每次提示清晰准确
- ✅ 可以逐步优化路径
- ✅ 最终成功时有成就感

---

## 📱 移动端测试

使用浏览器开发者工具切换到移动端视图：

- ✅ 错误提示框在小屏幕上显示正常
- ✅ 按钮大小适合触摸
- ✅ 文字清晰可读
- ✅ 关闭按钮容易点击

---

## 🐛 边界情况测试

### 1. 快速连续提交
- 连续点击"提交答案"按钮
- 预期：有 loading 状态，防止重复提交

### 2. 提交空路径
- 不输入任何站点就点击提交
- 预期：按钮禁用，无法提交

### 3. 提交单个站点
- 只输入一个站点就提交
- 预期：按钮禁用，无法提交

### 4. 关闭提示后再提交
- 关闭错误提示
- 不修改路径直接再次提交
- 预期：再次显示相同的错误提示

---

## ✅ 验收标准

所有以下条件都满足才算通过：

- [ ] 错误提示使用温和的颜色（橙色/黄色）
- [ ] 不使用红色大叉叉图标
- [ ] 答错时题目保持不变
- [ ] 答错时用户路径保持不变
- [ ] 可以在原路径基础上修改
- [ ] 提交按钮文案正确更新
- [ ] 错误提示可以关闭
- [ ] 显示"查看答案"按钮
- [ ] 查看答案需要确认
- [ ] 查看答案后显示所有最短路径
- [ ] 换乘站正确标注
- [ ] 可以多次尝试
- [ ] 答对后正确切换到结果状态

---

## 📞 问题反馈

如果发现任何问题，请记录：
1. 测试用例编号
2. 实际结果 vs 预期结果
3. 截图或录屏
4. 浏览器和版本
5. 控制台错误信息（如有）

---

**祝测试顺利！** 🎮
