# 功能测试指南

本文档列出了深圳地铁寻路游戏的主要功能测试步骤。

## 环境准备

1. 启动应用：
```bash
./start.sh
```

2. 访问地址：
- 前端：http://localhost:5173
- 后端 API 文档：http://localhost:8000/docs

---

## 测试用例

### 1. 线路选择锁定功能

**测试目的**：验证游戏开始后不能修改线路选择

**测试步骤**：
1. 打开应用，选择 1-2 条地铁线路（如：1号线、2号线）
2. 点击"随机生成起终点"或手动输入起终点
3. 点击"开始游戏"
4. 尝试点击线路复选框或"全选"/"清空"按钮

**预期结果**：
- ✅ 线路复选框和按钮应该被禁用（灰色显示）
- ✅ 鼠标悬停时显示禁止图标
- ✅ 无法修改线路选择

---

### 2. 成本提示显示

**测试目的**：验证出题后显示最短路径的大致站数

**测试步骤**：
1. 选择线路并生成起终点
2. 观察起终点信息下方

**预期结果**：
- ✅ 显示类似"💡 提示：最短路径大约需要 X 站"的提示
- ✅ 站数为整数（如果实际成本是 5.5，显示 6）

**测试数据示例**：
- 1号线：罗湖 → 世界之窗（应显示约 13 站）
- 2号线：赤湾 → 新秀（应显示约 29 站）

---

### 3. 详细错误提示

#### 3.1 起点错误

**测试步骤**：
1. 选择线路，设置起点为"罗湖"，终点为"世界之窗"
2. 输入路径：老街 → 大剧院 → 会展中心 → 世界之窗
3. 提交

**预期结果**：
- ✅ 显示红色错误提示
- ✅ 错误原因：起点错误：你的路径起点是 老街，但应该是 罗湖

#### 3.2 终点错误

**测试步骤**：
1. 设置起点为"罗湖"，终点为"世界之窗"
2. 输入路径：罗湖 → 国贸 → 老街 → 大剧院
3. 提交

**预期结果**：
- ✅ 显示红色错误提示
- ✅ 错误原因：终点错误：你的路径终点是 大剧院，但应该是 世界之窗

#### 3.3 站点不存在

**测试步骤**：
1. 只选择 1号线
2. 设置起点为"罗湖"，终点为"世界之窗"
3. 输入路径：罗湖 → 国贸 → 市民中心 → 世界之窗（市民中心在2号线）
4. 提交

**预期结果**：
- ✅ 显示红色错误提示
- ✅ 错误原因：站点不存在：市民中心 不在所选线路中

#### 3.4 站点不相邻

**测试步骤**：
1. 选择 1号线
2. 设置起点为"罗湖"，终点为"世界之窗"
3. 输入路径：罗湖 → 世界之窗（跳过中间站点）
4. 提交

**预期结果**：
- ✅ 显示红色错误提示
- ✅ 错误原因：站点不相邻：罗湖 → 世界之窗 之间没有直接连接

#### 3.5 路径不是最短

**测试步骤**：
1. 选择 1号线、2号线
2. 设置起点为"罗湖"，终点为"世界之窗"
3. 输入一条绕路的路径（如：罗湖 → 国贸 → 老街 → 大剧院 → 科学馆 → 华强路 → 岗厦 → 会展中心 → 购物公园 → 香蜜湖 → 车公庙 → 竹子林 → 侨城北 → 深康 → 白石洲 → 高新园 → 深大 → 桃园 → 大新 → 鲤鱼门 → 前海湾 → 新安 → 宝安中心 → 宝体 → 坪洲 → 碧海湾 → 侨城东 → 世界之窗）
4. 提交

**预期结果**：
- ✅ 显示黄色警告提示
- ✅ 错误原因：你的路径成本是 X，但最短路径成本是 Y。请尝试减少换乘或站点数量。
- ✅ 不显示正确答案

---

### 4. 查看答案功能

**测试目的**：验证答错时可以选择查看答案

**测试步骤**：
1. 故意输入一个错误的路径（如起点错误）
2. 提交后观察结果页面
3. 点击"👁️ 查看正确答案"按钮
4. 在弹出的确认对话框中点击"确定"

**预期结果**：
- ✅ 答错时不自动显示正确答案
- ✅ 显示"查看正确答案"按钮
- ✅ 点击按钮后弹出确认对话框
- ✅ 确认后显示所有最短路径（带换乘标注）
- ✅ 答对时自动显示所有最短路径

---

### 5. 换乘站标注

**测试目的**：验证正确答案中标注了换乘站

**测试步骤**：
1. 选择多条线路（如：1号线、2号线、11号线）
2. 生成需要换乘的起终点（如：罗湖 → 机场）
3. 输入正确的最短路径或查看答案

**预期结果**：
- ✅ 换乘站显示格式：站名(线路A换乘线路B)
- ✅ 换乘信息用橙色高亮显示
- ✅ 例如：罗湖 → 国贸 → 老街 → 大剧院 → 科学馆 → 华强路 → 岗厦 → 会展中心 → 购物公园 → 香蜜湖 → 车公庙(1号线换乘11号线) → 红树湾南 → 后海 → 南山 → 前海湾 → 宝安 → 碧海湾 → 机场

**测试数据示例**：
- 罗湖(1号线) → 机场(11号线)：应在车公庙标注换乘
- 罗湖(1号线) → 深圳北站(4号线)：应在会展中心标注换乘

---

## 完整游戏流程测试

**测试步骤**：
1. 选择 2-3 条线路
2. 随机生成起终点
3. 观察成本提示
4. 输入一条路径（可以是正确或错误的）
5. 提交并查看结果
6. 如果答错，点击"查看答案"
7. 点击"再来一局"或"返回首页"

**预期结果**：
- ✅ 整个流程顺畅无卡顿
- ✅ 所有提示信息清晰易懂
- ✅ 错误提示准确
- ✅ 换乘信息正确标注
- ✅ 可以正常开始新游戏

---

## 边界情况测试

### 1. 单条线路
- 选择只有 1 条线路
- 验证不会出现换乘

### 2. 相邻站点
- 起点和终点相邻（如：罗湖 → 国贸）
- 验证成本显示为 1 站

### 3. 同一站点
- 尝试设置起点和终点为同一站点
- 验证系统处理

### 4. 多条等价最短路径
- 选择有多条最短路径的起终点
- 验证显示所有路径

---

## 性能测试

1. 选择所有线路
2. 生成随机起终点
3. 观察响应时间

**预期结果**：
- ✅ API 响应时间 < 1 秒
- ✅ 页面无明显卡顿
- ✅ 路径计算准确

---

## 浏览器兼容性测试

测试浏览器：
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

测试内容：
- [ ] 页面显示正常
- [ ] 交互功能正常
- [ ] 样式显示正确
- [ ] 无控制台错误

---

## 移动端测试

1. 使用手机或浏览器开发者工具切换到移动端视图
2. 测试所有功能

**预期结果**：
- ✅ 响应式布局正常
- ✅ 按钮大小适合触摸
- ✅ 文字清晰可读
- ✅ 所有功能可用

---

## 问题反馈

如果发现任何问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期结果
4. 实际结果
5. 浏览器和版本
6. 截图（如有）
