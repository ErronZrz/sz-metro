# æ·±åœ³åœ°é“å¯»è·¯æ¸¸æˆ Web åº”ç”¨

ä¸€ä¸ªåŸºäº Vue 3 + FastAPI çš„æ·±åœ³åœ°é“æœ€çŸ­è·¯å¾„æŸ¥æ‰¾æ¸¸æˆã€‚

## é¡¹ç›®ç»“æ„

```
sz-metro/
â”œâ”€â”€ backend/          # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ services/    # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ routers/     # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models.py    # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ main.py      # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ lines.json       # åœ°é“çº¿è·¯æ•°æ®
â”‚   â””â”€â”€ requirements.txt # Python ä¾èµ–
â”‚
â”œâ”€â”€ frontend/         # Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/      # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/    # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ App.vue      # ä¸»åº”ç”¨
â”‚   â””â”€â”€ package.json     # Node ä¾èµ–
â”‚
â””â”€â”€ test.py          # åŸå‘½ä»¤è¡Œç‰ˆæœ¬
```

## æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI**: ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- **Pydantic**: æ•°æ®éªŒè¯
- **Uvicorn**: ASGI æœåŠ¡å™¨

### å‰ç«¯
- **Vue 3**: æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Vite**: ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- **Tailwind CSS**: å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Pinia**: Vue çŠ¶æ€ç®¡ç†
- **Axios**: HTTP å®¢æˆ·ç«¯

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯

```bash
cd backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡ (é»˜è®¤ç«¯å£ 8000)
uvicorn app.main:app --reload
```

åç«¯ API æ–‡æ¡£: http://localhost:8000/docs

### 2. å¯åŠ¨å‰ç«¯

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (é»˜è®¤ç«¯å£ 5173)
npm run dev
```

å‰ç«¯åº”ç”¨: http://localhost:5173

## API ç«¯ç‚¹

### è·å–æ‰€æœ‰çº¿è·¯
```
GET /api/lines
```

### è·å–æŒ‡å®šçº¿è·¯çš„ç«™ç‚¹
```
GET /api/lines/{line_name}/stations
```

### è·å–æ‰€æœ‰ç«™ç‚¹
```
GET /api/stations?lines=1å·çº¿,2å·çº¿
```

### éšæœºç”Ÿæˆèµ·ç»ˆç‚¹
```
POST /api/game/random-stations
Body: {"lines": ["1å·çº¿", "2å·çº¿"]}
```

### è®¡ç®—æœ€çŸ­è·¯å¾„
```
POST /api/game/calculate-path
Body: {
  "lines": ["1å·çº¿", "2å·çº¿"],
  "start": "ä¸–ç•Œä¹‹çª—",
  "end": "æ·±åœ³åŒ—ç«™"
}
```

### éªŒè¯ç”¨æˆ·è·¯å¾„
```
POST /api/game/validate-path
Body: {
  "lines": ["1å·çº¿", "2å·çº¿"],
  "start": "ä¸–ç•Œä¹‹çª—",
  "end": "æ·±åœ³åŒ—ç«™",
  "user_path": ["ä¸–ç•Œä¹‹çª—", "ä¾¨åŸä¸œ", ...]
}
```

## æ¸¸æˆè§„åˆ™

1. **é€‰æ‹©çº¿è·¯**: é€‰æ‹©ä¸€æ¡æˆ–å¤šæ¡åœ°é“çº¿è·¯
2. **è®¾å®šèµ·ç»ˆç‚¹**: æ‰‹åŠ¨è¾“å…¥æˆ–éšæœºç”Ÿæˆèµ·ç‚¹å’Œç»ˆç‚¹ç«™
3. **è¾“å…¥è·¯å¾„**: æŒ‰é¡ºåºè¾“å…¥ä½ è®¤ä¸ºçš„æœ€çŸ­è·¯å¾„
4. **æŸ¥çœ‹ç»“æœ**: ç³»ç»Ÿä¼šéªŒè¯ä½ çš„è·¯å¾„å¹¶æ˜¾ç¤ºæ‰€æœ‰æœ€çŸ­è·¯å¾„

### æˆæœ¬è®¡ç®—è§„åˆ™
- æ¯ç»è¿‡ä¸€ç«™: +1
- æ¯æ¬¡æ¢ä¹˜: +2.5
- ç›®æ ‡: æ‰¾åˆ°æ€»æˆæœ¬æœ€å°çš„è·¯å¾„

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
- ğŸš‡ **å¤šçº¿è·¯é€‰æ‹©**: æ”¯æŒé€‰æ‹©ä¸€æ¡æˆ–å¤šæ¡åœ°é“çº¿è·¯
- ğŸ² **éšæœºå‡ºé¢˜**: è‡ªåŠ¨ç”Ÿæˆèµ·ç»ˆç‚¹ï¼Œå¢åŠ æ¸¸æˆè¶£å‘³æ€§
- âœï¸ **è·¯å¾„è¾“å…¥**: é€ç«™è¾“å…¥ä½ çš„è·¯å¾„æ–¹æ¡ˆ
- âœ… **æ™ºèƒ½éªŒè¯**: å®æ—¶éªŒè¯è·¯å¾„çš„åˆæ³•æ€§å’Œæœ€ä¼˜æ€§
- ğŸ“Š **ç»“æœå±•ç¤º**: æ˜¾ç¤ºæ‰€æœ‰æœ€çŸ­è·¯å¾„å’Œæˆæœ¬å¯¹æ¯”

### ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- ğŸ”’ **çº¿è·¯é”å®š**: æ¸¸æˆå¼€å§‹åè‡ªåŠ¨é”å®šçº¿è·¯é€‰æ‹©ï¼Œé˜²æ­¢è¯¯æ“ä½œ
- ğŸ’¡ **æˆæœ¬æç¤º**: å‡ºé¢˜åæ˜¾ç¤ºæœ€çŸ­è·¯å¾„çš„å¤§è‡´ç«™æ•°ï¼Œå¸®åŠ©ä¼°ç®—
- ğŸ“ **è¯¦ç»†é”™è¯¯æç¤º**: 
  - èµ·ç‚¹/ç»ˆç‚¹é”™è¯¯æç¤º
  - ç«™ç‚¹ä¸å­˜åœ¨æç¤º
  - ç«™ç‚¹ä¸ç›¸é‚»æç¤º
  - è·¯å¾„ä¸æ˜¯æœ€çŸ­çš„è¯¦ç»†è¯´æ˜
- ğŸ‘ï¸ **çµæ´»æŸ¥çœ‹ç­”æ¡ˆ**: ç­”é”™æ—¶å¯é€‰æ‹©æ˜¯å¦æŸ¥çœ‹æ­£ç¡®ç­”æ¡ˆ
- ğŸš‡ **æ¢ä¹˜ç«™æ ‡æ³¨**: æ­£ç¡®ç­”æ¡ˆä¸­ç”¨æ©™è‰²é«˜äº®æ ‡æ³¨æ¢ä¹˜ç«™

### ğŸ“± ç•Œé¢ç‰¹æ€§
- ğŸ¨ ç°ä»£åŒ–çš„æ¸å˜èƒŒæ™¯è®¾è®¡
- ğŸ“¦ å¡ç‰‡å¼å¸ƒå±€ï¼Œæ¸…æ™°åˆ†åŒº
- ğŸ”„ æµç•…çš„äº¤äº’åŠ¨ç”»
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æ¸¸æˆæµç¨‹

1. **é€‰æ‹©çº¿è·¯**
   ```
   â˜‘ï¸ 1å·çº¿
   â˜‘ï¸ 2å·çº¿
   â˜ 3å·çº¿
   ...
   ```
   > ğŸ’¡ æç¤ºï¼šæ¸¸æˆå¼€å§‹åçº¿è·¯å°†è¢«é”å®š

2. **è®¾å®šèµ·ç»ˆç‚¹**
   ```
   èµ·ç‚¹: ç½—æ¹–
   ç»ˆç‚¹: ä¸–ç•Œä¹‹çª—
   ```
   > ğŸ’¡ æç¤ºï¼šæœ€çŸ­è·¯å¾„å¤§çº¦éœ€è¦ 13 ç«™

3. **è¾“å…¥è·¯å¾„**
   ```
   ç½—æ¹– â†’ å›½è´¸ â†’ è€è¡— â†’ å¤§å‰§é™¢ â†’ ç§‘å­¦é¦† â†’ åå¼ºè·¯ â†’ 
   å²—å¦ â†’ ä¼šå±•ä¸­å¿ƒ â†’ è´­ç‰©å…¬å›­ â†’ é¦™èœœæ¹– â†’ è½¦å…¬åº™ â†’ 
   ä¾¨åŸåŒ— â†’ æ·±åº· â†’ ç™½çŸ³æ´² â†’ é«˜æ–°å›­ â†’ æ·±å¤§ â†’ æ¡ƒå›­ â†’ 
   å¤§æ–° â†’ é²¤é±¼é—¨ â†’ å‰æµ·æ¹¾ â†’ æ–°å®‰ â†’ å®å®‰ä¸­å¿ƒ â†’ å®ä½“ â†’ 
   åªæ´² â†’ ç¢§æµ·æ¹¾ â†’ ä¾¨åŸä¸œ â†’ ä¸–ç•Œä¹‹çª—
   ```

4. **æŸ¥çœ‹ç»“æœ**
   - âœ… ç­”å¯¹ï¼šè‡ªåŠ¨æ˜¾ç¤ºæ‰€æœ‰æœ€çŸ­è·¯å¾„ï¼ˆå¸¦æ¢ä¹˜æ ‡æ³¨ï¼‰
   - âŒ ç­”é”™ï¼šæ˜¾ç¤ºé”™è¯¯åŸå› ï¼Œå¯é€‰æ‹©æŸ¥çœ‹ç­”æ¡ˆ

### é”™è¯¯æç¤ºç¤ºä¾‹

**èµ·ç‚¹é”™è¯¯**ï¼š
```
âŒ èµ·ç‚¹é”™è¯¯ï¼šä½ çš„è·¯å¾„èµ·ç‚¹æ˜¯ å›½è´¸ï¼Œä½†åº”è¯¥æ˜¯ ç½—æ¹–
```

**ç«™ç‚¹ä¸ç›¸é‚»**ï¼š
```
âŒ ç«™ç‚¹ä¸ç›¸é‚»ï¼šç½—æ¹– â†’ ä¸–ç•Œä¹‹çª— ä¹‹é—´æ²¡æœ‰ç›´æ¥è¿æ¥
```

**è·¯å¾„ä¸æ˜¯æœ€çŸ­**ï¼š
```
âš ï¸ ä½ çš„è·¯å¾„æˆæœ¬æ˜¯ 15.5ï¼Œä½†æœ€çŸ­è·¯å¾„æˆæœ¬æ˜¯ 12.5ã€‚
   è¯·å°è¯•å‡å°‘æ¢ä¹˜æˆ–ç«™ç‚¹æ•°é‡ã€‚
```

### æ¢ä¹˜æ ‡æ³¨ç¤ºä¾‹

```
ç½—æ¹– â†’ å›½è´¸ â†’ è€è¡— â†’ å¤§å‰§é™¢ â†’ ç§‘å­¦é¦† â†’ åå¼ºè·¯ â†’ 
å²—å¦ â†’ ä¼šå±•ä¸­å¿ƒ â†’ è´­ç‰©å…¬å›­ â†’ é¦™èœœæ¹– â†’ 
è½¦å…¬åº™(1å·çº¿æ¢ä¹˜11å·çº¿) â†’ çº¢æ ‘æ¹¾å— â†’ åæµ· â†’ å—å±± â†’ 
å‰æµ·æ¹¾ â†’ å®å®‰ â†’ ç¢§æµ·æ¹¾ â†’ æœºåœº
```
> æ¢ä¹˜ç«™ç”¨æ©™è‰²é«˜äº®æ˜¾ç¤º

## å¼€å‘è¯´æ˜

### åç«¯å¼€å‘
- æ ¸å¿ƒé€»è¾‘åœ¨ `backend/app/services/` ç›®å½•
- API è·¯ç”±åœ¨ `backend/app/routers/metro.py`
- ä½¿ç”¨ Dijkstra ç®—æ³•è®¡ç®—æœ€çŸ­è·¯å¾„

### å‰ç«¯å¼€å‘
- ç»„ä»¶åœ¨ `frontend/src/components/` ç›®å½•
- çŠ¶æ€ç®¡ç†ä½¿ç”¨ Pinia (`frontend/src/stores/game.js`)
- API è°ƒç”¨å°è£…åœ¨ `frontend/src/services/api.js`

## æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### åç«¯
```bash
cd backend
pip install -r requirements.txt
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### å‰ç«¯
```bash
cd frontend
npm run build
# æ„å»ºäº§ç‰©åœ¨ dist/ ç›®å½•
```

## åŸå‘½ä»¤è¡Œç‰ˆæœ¬

åŸå§‹çš„å‘½ä»¤è¡Œç‰ˆæœ¬ä»ç„¶ä¿ç•™åœ¨ `test.py` æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼š

```bash
python test.py 1å·çº¿ 2å·çº¿
```

## License

MIT
